!function(){"use strict";angular.module("angularCachedDemo",["LocalStorageModule","DeferredUpdateModule","LoadingModule","recentPostsService","ngResource","ngRoute"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl"}).otherwise({redirectTo:"/"})}]).config(["$httpProvider",function(a){a.defaults.useXDomain=!0,delete a.defaults.headers.common["X-Requested-With"]}])}(),function(){"use strict";angular.module("angularCachedDemo").controller("MainCtrl",["$scope","recentPostsService","localStorageService",function(a,b,c){a.initCache=function(){var b=c.get("cachingEnabled");void 0==b?c.add("cachingEnabled",a.cacheEnabled):a.cacheEnabled=b},a.toggleCache=function(){"NO"===a.cacheEnabled&&c.clearAll(),c.add("cachingEnabled",a.cacheEnabled)},a.cacheSupport=function(){return!c.isSupported()},b.getRecentPosts().then(function(b){a.messages=b.response.messages.message})}])}(),function(){"use strict";angular.module("recentPostsService",["LocalStorageModule","DeferredUpdateModule","ngResource"]).factory("recentPostsService",["$rootScope","$resource","localStorageService","deferredUpdateService",function(a,b,c,d){return{getRecentPosts:function(){var e,f,g,h,i=c.get("cachingEnabled");if(void 0===i&&(i="YES"),g=d.defer(),h=g.promise,e=b("http://lithosphere.lithium.com/restapi/vc/posts/recent?restapi.response_format=json&restapi.response_style=-types,-null",{callback:"JSON_CALLBACK"},{get:{method:"JSONP"}}),f={},a.loading=!0,e.get(f,function(b){"YES"===i&&c.add("recent",b),g.resolve(b),a.loading=!1}),"YES"===i){var j=c.get("recent");void 0!=j&&g.resolve(j)}return h}}}])}(),function(a){var b=a.module("DeferredUpdateModule",[]);b.service("deferredUpdateService",function(a){this.all=function(){return a.all.apply(a,arguments)},this.defer=function(){var b=a.defer(),c=b.promise,d={resolve:b.resolve,reject:b.reject,then:c.then},e=!1,f=!1,g=[],h=[];return b.resolve=function(){if(e&&!f)for(var a=0,c=g.length;c>a;a++)g[a].apply({},arguments);else e=!0,d.resolve.apply(b,arguments)},b.reject=function(){if(e)for(var a=0,c=h.length;c>a;a++)h[a].apply({},arguments);else f=!0,d.reject.apply(b,arguments)},c.then=function(){var a=d.then.apply(c,arguments);return a.update=c.update,a.mistake=c.mistake,a},c.update=function(a){return g.push(a),c},c.mistake=function(a){return h.push(a),c},b},this.reject=function(){return a.reject.apply(a,arguments)},this.when=function(){return a.when.apply(a,arguments)}})}(angular),function(){"use strict";angular.module("LoadingModule",[]).directive("loading",function(){return{restrict:"A",link:function(a,b){a.$watch("loading",function(a){a?b.html('<div class="loading-indicator">&nbsp;</div>'):b.html("")})}}})}();